Search.setIndex({"docnames": ["index", "source/arena/arena", "source/console/terminal_console", "source/features/autopilot", "source/features/controllers", "source/features/geofencing", "source/features/modes", "source/features/trajectory_manager", "source/references/bibliography", "source/references/license", "source/setup/installation", "source/setup/reference_frames", "source/simulation/gazebo_classic", "source/simulation/pegasus_simulator", "source/vehicles/kopis", "source/vehicles/pegasus", "source/vehicles/snapdragon"], "filenames": ["index.rst", "source/arena/arena.rst", "source/console/terminal_console.rst", "source/features/autopilot.rst", "source/features/controllers.rst", "source/features/geofencing.rst", "source/features/modes.rst", "source/features/trajectory_manager.rst", "source/references/bibliography.rst", "source/references/license.rst", "source/setup/installation.rst", "source/setup/reference_frames.rst", "source/simulation/gazebo_classic.rst", "source/simulation/pegasus_simulator.rst", "source/vehicles/kopis.rst", "source/vehicles/pegasus.rst", "source/vehicles/snapdragon.rst"], "titles": ["Pegasus Documentation", "Taguspark Flight Arena", "Terminal console", "Autopilot", "Controllers", "Geofencing", "Modes", "Trajectory Manager", "Bibliography", "License", "Installation", "Reference Frames", "Gazebo Classic", "Pegasus Simulator", "Kopis 3\u201d", "Pegasus Drone v1.0.0", "Snapdragon Drone"], "terms": {"i": [0, 1, 3, 4, 6, 7, 9, 12, 13, 16], "quasi": [0, 9], "open": [0, 1, 9, 16], "sourc": [0, 6, 9, 10, 13, 16], "guidanc": [0, 3, 9], "navig": [0, 9], "control": [0, 3, 6, 7, 8, 9, 12, 16], "gnc": [0, 9, 13], "softwar": [0, 9, 12], "packag": [0, 3, 6, 12], "autonom": [0, 8], "drone": [0, 10], "us": [0, 1, 3, 4, 5, 6, 7, 8, 9, 12, 13, 16], "ro": [0, 1, 3, 4, 5, 6, 10], "2": [0, 1, 5, 9, 10, 12, 16], "It": [0, 1, 3, 6], "design": 0, "px4": [0, 3], "stack": [0, 15], "enough": [0, 4], "other": [0, 3, 6, 9], "well": [0, 6, 12], "mainli": 0, "written": [0, 9], "c": [0, 3, 6, 9], "python": [0, 12], "thi": [0, 1, 3, 4, 6, 7, 9, 12, 13, 16], "work": [0, 6, 16], "part": 0, "semi": 0, "person": [0, 9], "side": 0, "marcelo": [0, 8, 9], "jacinto": [0, 8, 9], "end": [0, 4, 16], "goal": [0, 4], "support": 0, "experiment": 0, "valid": [0, 3], "hi": 0, "ph": 0, "d": [0, 4, 7], "provid": [0, 3, 9], "A": [0, 1, 6, 9], "set": [0, 3, 4, 6, 15, 16], "node": [0, 3, 4, 5, 6], "modular": [0, 6], "state": [0, 3, 4, 5], "machin": [0, 3], "cad": 0, "model": [0, 4, 6], "3d": [0, 4], "print": 0, "gazebo": [0, 10], "plugin": [0, 3, 6], "warranti": [0, 9], "intend": 0, "research": [0, 9], "field": [0, 16], "robot": [0, 8], "mai": [0, 9, 16], "NOT": [0, 9], "commerci": [0, 9, 15], "purpos": [0, 4, 9], "militari": [0, 9, 15], "applic": [0, 1, 6, 8, 9], "without": [0, 3, 6, 9, 14], "explicit": 0, "consent": 0, "from": [0, 1, 3, 4, 6, 9, 16], "founder": 0, "under": [0, 1, 3, 6, 15], "supervis": 0, "prof": 0, "rita": [0, 8], "cunha": [0, 8], "ist": 0, "isr": [0, 1], "lisbon": [0, 1], "architectur": 0, "jo\u00e3o": 0, "pinto": [0, 8], "If": [0, 1, 4, 6, 16], "you": [0, 1, 6, 10, 12, 16], "find": [0, 6], "your": [0, 1, 6, 16], "academ": [0, 9], "pleas": [0, 6], "cite": 0, "tech": 0, "report": [0, 1], "below": [0, 4, 6], "also": [0, 1, 3, 4, 6], "avail": [0, 6, 16], "todo": [0, 7, 16], "misc": 0, "jacinto2024pegasu": 0, "titl": 0, "author": [0, 6, 9], "year": 0, "2024": [0, 9], "eprint": 0, "archiveprefix": 0, "arxiv": 0, "primaryclass": 0, "The": [0, 1, 3, 4, 6, 7, 9, 15, 16], "wa": [0, 6, 16], "grant": 0, "fund": 0, "funda\u00e7\u00e3o": 0, "para": 0, "ci\u00eancia": 0, "e": [0, 4], "tecnologia": 0, "fct": 0, "As": 0, "would": 0, "like": [0, 5, 6], "thank": 0, "follow": [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 14, 15, 16], "coleagu": 0, "friend": 0, "particular": [0, 9], "order": [0, 3, 4, 10, 14, 15], "dure": [0, 1], "test": [0, 12, 16], "pedro": 0, "trindad": 0, "gil": 0, "serrano": 0, "jose": 0, "gome": 0, "santo": 0, "joao": 0, "lehodei": 0, "Not": 0, "onli": [0, 4, 6, 9, 10], "have": [0, 1, 3, 4, 5, 6, 10, 16], "made": 0, "possibl": [0, 9], "crash": 0, "an": [0, 1, 4, 6, 7, 13, 16], "enjoy": 0, "experi": [0, 1, 13], "checkout": [0, 12], "contribut": 0, "instal": [0, 6, 13], "extern": [0, 14], "depend": [0, 6, 12, 16], "run": [0, 3, 13, 16], "real": 0, "frame": [0, 1, 6, 7], "autopilot": [0, 4, 5, 6, 7, 16], "0": [0, 1, 16], "oper": [0, 4, 6, 16], "mode": [0, 4, 5, 12, 16], "1": [0, 9, 12, 13, 16], "interfac": [0, 1], "explan": 0, "3": [0, 4, 6, 9, 15], "configur": [0, 4, 5, 6, 16], "file": [0, 1, 6, 10, 13], "ad": [0, 16], "custom": [0, 3, 5], "definit": [0, 3, 6], "pid": [0, 3], "mathemat": 0, "background": 0, "melling": [0, 3, 8], "geofenc": [0, 3, 6], "trajectori": [0, 3, 6, 8], "manag": [0, 3, 6], "static": 0, "termin": [0, 6], "consol": 0, "classic": [0, 10], "v1": [0, 12], "bill": 0, "materi": [0, 9], "indoor": [0, 1], "setup": [0, 1, 3, 4, 10, 12, 13, 16], "realsens": 0, "kopi": [0, 10], "snapdragon": 0, "taguspark": 0, "up": [0, 3, 6, 16], "optitrack": 0, "motiv": 0, "licens": [0, 6, 15], "bibliographi": 0, "index": 0, "modul": [0, 12, 16], "search": 0, "page": [0, 6, 10, 13, 16], "space": 1, "administr": 1, "which": [1, 3, 4, 6, 7, 12, 16], "featur": [1, 9], "motion": [1, 3, 4, 8], "captur": 1, "system": [1, 3, 4, 6, 8], "mc": 1, "consist": 1, "8": [1, 3, 6], "camera": [1, 14], "ar": [1, 3, 4, 6, 9, 12, 14, 15, 16], "mount": 1, "ceil": 1, "track": [1, 3, 4, 6, 7], "posit": [1, 3, 4, 6, 7], "orient": 1, "rigid": 1, "bodi": [1, 4, 6], "equip": 1, "reflect": 1, "marker": 1, "dedic": 1, "comput": [1, 4, 16], "stream": 1, "obtain": [1, 4], "data": [1, 9, 16], "network": [1, 16], "dimens": 1, "7": [1, 6], "x": [1, 3, 4], "4": [1, 6, 9, 14, 15, 16], "5": [1, 3, 4, 6, 9], "m": [1, 3, 4, 6, 7], "here": [1, 6], "we": [1, 4, 5, 6, 7, 12, 16], "describ": [1, 4], "calibr": 1, "procedur": 1, "turn": [1, 16], "router": [1, 16], "get": [1, 3, 4, 5, 6], "tool": [1, 16], "readi": [1, 3, 6], "launch": [1, 6, 13], "window": [1, 16], "desktop": 1, "pane": 1, "click": [1, 16], "clear": 1, "mask": 1, "visibl": [1, 6], "all": [1, 3, 6, 9, 12], "bright": 1, "spot": 1, "can": [1, 4, 6, 7, 10, 15, 16], "mistakenli": 1, "identifi": 1, "passiv": 1, "start": [1, 6, 10, 13], "process": 1, "wand": 1, "enter": [1, 6], "hand": 1, "wave": 1, "around": 1, "make": [1, 6, 12], "sure": [1, 6, 12], "led": [1, 16], "indic": [1, 6], "ring": 1, "complet": 1, "fill": 1, "green": [1, 16], "calcul": 1, "appli": [1, 4], "wait": 1, "result": 1, "pop": 1, "check": [1, 3, 4, 5, 6, 12], "excel": 1, "except": 1, "press": [1, 16], "els": 1, "cancel": 1, "repeat": 1, "place": [1, 3, 6], "squar": 1, "center": [1, 3], "shorter": 1, "leg": 1, "point": [1, 4, 16], "toward": 1, "mind": 1, "express": [1, 4, 6, 7, 9], "east": [1, 4], "north": [1, 4], "enu": 1, "inerti": [1, 4, 7], "standard": 1, "represent": 1, "mavlink": [1, 16], "convert": [1, 4], "down": [1, 4], "ned": [1, 3, 4, 6], "attitud": [1, 3, 4, 6], "front": 1, "right": [1, 4, 7, 9, 16], "frd": [1, 4, 6], "ground": [1, 3, 6], "plane": 1, "tab": 1, "finish": [1, 3, 6], "save": [1, 16], "later": 1, "multipl": 1, "consect": 1, "dai": 1, "howev": [1, 4, 6, 9], "accuraci": 1, "natur": [1, 4], "deterior": 1, "over": 1, "time": [1, 3, 4, 6, 7, 14, 16], "due": 1, "ambient": 1, "factor": 1, "fluctuat": 1, "temperatur": 1, "should": [1, 3, 6, 16], "re": 1, "weekli": 1, "basi": 1, "take": [1, 3, 4, 6], "out": [1, 9, 12], "vehicl": [1, 3, 4, 5, 6, 7, 8], "insid": [1, 3, 6], "its": [1, 3, 6, 9, 12], "select": [1, 16], "group": 1, "see": 1, "screen": [1, 6, 16], "onc": [1, 6, 10], "detect": 1, "creat": [1, 4, 5, 6, 7, 10], "them": [1, 3, 6, 10], "choos": 1, "On": [1, 13, 16], "asset": 1, "newli": [1, 6], "At": 3, "implement": [3, 4, 6], "locat": 3, "pegasus_autopilot": [3, 4, 6], "respons": 3, "keep": [3, 6], "current": [3, 4, 5, 6], "expos": 3, "each": [3, 4, 6], "api": 3, "command": [3, 4, 6], "given": [3, 4, 6, 7, 9], "veloc": [3, 4, 6, 7], "etc": [3, 4, 5, 6], "within": 3, "bring": 3, "back": 3, "desir": [3, 4, 6, 7], "includ": [3, 6, 9], "allow": [3, 6, 16], "easi": 3, "extens": 3, "modifi": [3, 6], "base": [3, 4, 6], "load": [3, 6], "runtim": [3, 6], "commun": [3, 6], "between": [3, 7], "default": [3, 5, 6, 16], "arm": [3, 6], "off": [3, 6], "disarm": [3, 4, 6], "takeoff": [3, 6], "predefin": [3, 6], "altitud": [3, 6], "abov": [3, 6, 9, 16], "land": [3, 6], "hold": [3, 6], "waypoint": [3, 6], "goe": [3, 6], "defin": [3, 4, 6, 7], "hpp": [3, 6], "header": [3, 6, 16], "namespac": [3, 4, 5, 6, 7], "class": [3, 4, 5, 6, 7], "public": [3, 4, 5, 6, 7, 9], "rclcpp": [3, 4, 5, 6], "function": [3, 4, 5, 6, 7], "execut": [3, 6], "period": 3, "loop": [3, 4, 6, 12], "virtual": [3, 4, 5, 6, 7], "void": [3, 4, 5, 6], "updat": [3, 4, 6, 12], "establish": 3, "transit": [3, 6], "bool": [3, 5, 6], "change_mod": [3, 6], "const": [3, 4, 5, 6, 7], "std": [3, 4, 5, 6, 7], "string": [3, 6], "new_mod": 3, "forc": [3, 4, 6], "fals": [3, 5, 6], "signal": [3, 6], "ha": [3, 5, 6, 16], "fallback": [3, 6], "signal_mode_finish": [3, 6], "return": [3, 4, 5, 6, 7], "inlin": [3, 4, 5, 6, 7], "get_mod": 3, "current_mode_": 3, "get_stat": 3, "state_": 3, "vehiclestatu": [3, 4, 5, 6], "get_statu": 3, "status_": 3, "vehicleconst": [3, 4, 5, 6], "get_vehicle_const": [3, 4, 5, 6], "vehicle_constants_": 3, "initi": [3, 4, 5, 6, 12, 16], "privat": [3, 6], "pre": [3, 6, 16], "initialize_control": [3, 4], "initialize_geofenc": [3, 5], "initialize_trajectory_manag": 3, "initialize_operating_mod": 3, "ros2": [3, 6, 13], "initialize_autopilot": 3, "initialize_publish": 3, "initialize_subscrib": 3, "initialize_servic": 3, "subscrib": [3, 4, 5, 6], "callback": [3, 6], "state_callback": 3, "nav_msg": 3, "msg": [3, 6], "odometri": 3, "constsharedptr": [3, 6], "status_callback": 3, "pegasus_msg": [3, 6], "statu": [3, 4, 5, 6], "vehicle_constants_callback": 3, "servic": [3, 6, 9], "change_mode_callback": 3, "shared_ptr": [3, 4, 5, 6, 7], "srv": 3, "setmod": 3, "request": 3, "chang": [3, 16], "sharedptr": [3, 4, 5, 6, 7], "change_mode_service_": 3, "publish": [3, 4, 5, 6], "autopilotstatu": 3, "status_publisher_": 3, "subscript": [3, 6], "state_subscriber_": 3, "status_subscriber_": 3, "vehicle_constants_subscriber_": 3, "messag": [3, 6], "status_msg_": 3, "vehicle_constants_msg_": 3, "timer": 3, "handl": [3, 12], "timerbas": 3, "timer_": 3, "map": [3, 4], "uniqueptr": [3, 4, 5, 6, 7], "operating_modes_": 3, "vector": [3, 4, 6], "valid_transitions_": 3, "fallback_modes_": 3, "on_finish_modes_": 3, "geofencing_violation_fallback_": 3, "config": [3, 4, 5, 6, 16], "mode_config_": 3, "uniniti": 3, "low": [3, 6], "level": [3, 6], "refer": [3, 6], "controller_config_": 3, "controller_": [3, 6], "nullptr": [3, 4, 6], "object": [3, 5, 6, 7], "geofencing_config_": 3, "geofencing_": 3, "complex": [3, 6], "plan": [3, 8], "trajectorymanag": [3, 6], "trajectory_manager_config_": 3, "trajectory_manager_": [3, 6], "auxiliar": 3, "counter": 3, "when": [3, 4, 6], "int": [3, 4], "force_change_counter_": 3, "variabl": [3, 7], "last_time_": 3, "flag": [3, 6], "mode_finished_": 3, "loader": 3, "unique_ptr": [3, 4, 5, 6, 7], "pluginlib": [3, 5, 6], "classload": 3, "mode_loader_": 3, "controller_loader_": 3, "geofencing_loader_": 3, "trajectory_manager_loader_": 3, "In": [3, 4, 6, 7, 8, 10, 12, 14, 15], "ros__paramet": [3, 6], "rate": [3, 4, 6, 7], "50": [3, 6], "hz": [3, 6], "perform": [3, 4, 5, 6, 16], "differ": [3, 6], "mellingercontrol": [3, 4], "need": [3, 4, 5, 6, 10, 12], "onboardcontrol": [3, 6], "control_posit": [3, 6], "fmu": [3, 6], "control_attitud": [3, 6], "control_attitude_r": [3, 6], "attitude_r": [3, 4, 6], "pidcontrol": [3, 4], "pid_debug_top": 3, "statist": [3, 4], "gain": 3, "y": [3, 4], "z": [3, 4, 6], "kp": 3, "proport": [3, 4], "kd": 3, "deriv": [3, 4, 6, 9], "ki": 3, "integr": [3, 12], "kff": 3, "feed": 3, "forward": 3, "min_output": 3, "20": [3, 6], "minimum": [3, 7, 8], "output": [3, 4, 6], "max_output": 3, "debug_top": 3, "10": [3, 6, 8, 16], "9": [3, 4], "kr": 3, "error": [3, 4], "100": [3, 4], "maximum": [3, 7], "mechan": [3, 6], "safe": [3, 6], "boxgeofenc": [3, 6], "limits_x": [3, 6], "limits_i": [3, 6], "limits_z": [3, 6], "coordinad": [3, 6], "neg": [3, 6], "gener": [3, 4, 6, 8], "parameter": [3, 6, 7], "trajectory_manag": [3, 6], "statictrajectorymanag": [3, 6], "arcfactori": 3, "linefactori": 3, "circlefactori": 3, "lemniscatefactori": 3, "csvfactori": 3, "reset_trajectori": [3, 6], "reset": [3, 4, 6, 16], "individu": 3, "add_arc": 3, "add_lin": 3, "add_circl": 3, "add_lemnisc": 3, "add_csv": 3, "one": [3, 4, 6], "default_mod": [3, 6], "disarmmod": [3, 6], "exist": [3, 6], "armmod": [3, 6], "takeoffmod": [3, 6], "landmod": [3, 6], "holdmod": [3, 6], "waypointmod": [3, 6], "followtrajectorymod": [3, 6], "passthroughmod": [3, 6], "someth": 3, "wrong": 3, "specif": [3, 6, 9], "valid_transit": [3, 6], "disarm_servic": [3, 6], "kill_switch": [3, 6], "geofencing_violation_fallback": [3, 6], "arm_servic": [3, 6], "offboard_servic": [3, 6], "offboard": [3, 6], "on_finish": [3, 6], "takeoff_altitud": 3, "set_takeoff_altitude_servic": 3, "set_takeoff": 3, "land_spe": [3, 6], "": [3, 4, 6, 7, 8, 16], "land_detected_treshold": [3, 6], "weakptr": [4, 5, 6, 7], "weak_ptr": [4, 5, 6, 7], "struct": [4, 5, 6], "ptr": [4, 5, 6], "case": [4, 5, 6, 16], "get_vehicle_st": [4, 5, 6], "pointer": [4, 5, 6], "get_vehicle_statu": [4, 5, 6], "dynam": [4, 6], "constant": [4, 5, 6], "node_": [4, 5, 6], "brief": [4, 5, 7], "pure": 4, "must": [4, 5, 6, 9], "method": [4, 6], "certain": 4, "paramet": [4, 6, 7, 16], "call": [4, 6], "switch": 4, "doe": 4, "noth": [4, 6], "reset_control": 4, "target": [4, 6], "yaw": [4, 6, 7], "degr": 4, "param": [4, 7], "degre": 4, "set_posit": [4, 6], "eigen": [4, 6, 7], "vector3d": [4, 6, 7], "doubl": [4, 6, 7], "dt": [4, 6, 7], "yaw_rat": 4, "zero": [4, 6, 7], "acceler": [4, 7], "jerk": [4, 7], "snap": [4, 7, 8], "throw": 4, "runtime_error": 4, "set_veloc": 4, "rotat": 4, "vertic": 4, "align": 4, "set_body_veloc": 4, "thrust": [4, 6], "thrust_forc": 4, "newton": 4, "set_attitud": 4, "set_attitude_r": 4, "motor": [4, 12, 15], "speed": [4, 7], "set_motor_spe": 4, "vectorxd": 4, "motor_veloc": 4, "set_motor_veloc": 4, "protect": [4, 5, 6, 7], "instanti": [4, 6], "pass": [4, 6], "section": [4, 6, 7], "detail": 4, "pegasu": [4, 6, 12, 14], "send": [4, 6, 16], "total": 4, "inner": 4, "same": [4, 6, 13], "algorithm": 4, "jac21": [4, 8], "jcp22": [4, 8], "consid": [4, 7], "multirotor": 4, "ddot": [4, 7], "p": [4, 7, 10], "g": 4, "e_3": 4, "underbrac": 4, "frac": [4, 7], "t": [4, 6, 7, 8, 15], "r": [4, 7], "_": 4, "u": 4, "where": [4, 6, 16], "mathbb": [4, 7], "input": 4, "e_p": 4, "p_d": [4, 7], "dot": [4, 7], "_p": 4, "e_v": 4, "v": 4, "v_d": 4, "pd": [4, 7], "term": 4, "k_p": 4, "k_d": 4, "a_d": 4, "ge_3": 4, "render": 4, "global": 4, "assymptot": 4, "stabl": [4, 12], "ga": 4, "equal": 4, "r_z": 4, "psi_": 4, "de": [4, 16], "r_y": 4, "theta_": 4, "r_x": 4, "phi_": 4, "r_": 4, "replac": [4, 16], "previou": 4, "equat": 4, "yield": 4, "r3d": 4, "top": 4, "But": 4, "know": 4, "begin": 4, "bmatrix": 4, "co": 4, "sin": 4, "31": 4, "32": 4, "33": 4, "remind": 4, "mathcal": 4, "accord": [4, 6], "convent": 4, "b": 4, "therefor": 4, "minu": 4, "sign": [4, 6], "appear": 4, "axi": 4, "downward": 4, "upward": 4, "final": 4, "roll": 4, "pitch": 4, "angl": [4, 7], "arcsin": 4, "arctan": 4, "left": [4, 7, 16], "correspond": [4, 9], "code": [4, 6, 9, 10, 12, 13, 16], "autopilot_control": 4, "src": [4, 6, 10, 13, 16], "pid_control": 4, "cpp": [4, 6], "shown": 4, "ignor": 4, "path": [4, 6, 7], "pos_error": 4, "vel_error": 4, "81": 4, "unsign": 4, "controllers_": 4, "compute_output": 4, "mass_": 4, "vector4d": 4, "attitude_thrust": 4, "get_attitude_thrust_from_acceler": 4, "deg_to_rad": 4, "attitude_target": 4, "rad_to_deg": 4, "update_statist": 4, "statistics_pub_": 4, "pid_statistics_msg_": 4, "mass": [4, 6], "matrix3d": 4, "rzt": 4, "normal": [4, 7, 16], "norm": 4, "matrix": 4, "about": [4, 6], "actual": [4, 10], "asin": 4, "atan2": 4, "sinc": [4, 6], "quadrotor": [4, 8], "seen": 4, "necessari": [4, 6, 16], "emerg": 4, "practic": 4, "littl": 4, "bit": 4, "improv": 4, "accomodad": 4, "uncertainti": 4, "coomand": 4, "adapt": 4, "version": [4, 6, 12, 16], "propos": 4, "mk11": [4, 8], "pgc21": [4, 8], "linear": [4, 6], "mge_3": 4, "tre_3": 4, "trackign": 4, "f_": 4, "_d": [4, 7], "next": 4, "z_b": 4, "direct": [4, 9], "oposit": 4, "y_c": 4, "x_b": 4, "y_b": 4, "attitut": 4, "encod": 4, "text": 4, "e_r": 4, "vee": 4, "skew": 4, "symmetr": 4, "a_3": 4, "a_2": 4, "a_1": 4, "To": [4, 6, 10, 12, 13, 16], "project": [4, 6, 9], "befor": 4, "done": 4, "cdot": 4, "drive": [4, 6], "first": [4, 12, 16], "angular": [4, 6], "re_3": 4, "rightarrow": 4, "ma": 4, "leftrightarrow": 4, "j": [4, 8], "big": 4, "tr": 4, "omega": 4, "q": 4, "multipli": 4, "psi": 4, "Then": 4, "note": [4, 6, 7, 12], "our": 4, "p_": 4, "q_": 4, "omega_": 4, "_b": 4, "ref": 4, "k_r": 4, "mellinger_control": 4, "quaternion": 4, "torotationmatrix": 4, "euler": 4, "debug": 4, "euler_angl": 4, "eulerangl": 4, "radian": [4, 7], "yaw_rad": 4, "yaw_rate_rad": 4, "external_forc": 4, "scheme": 4, "f_de": 4, "b3d": 4, "eq": 4, "12": 4, "more": [4, 6], "z_b_de": 4, "x_b_de": 4, "cross": 4, "y_b_de": 4, "r_de": 4, "col": 4, "euler_angles_d": 4, "r_error": 4, "transpos": 4, "coordin": 4, "manifold": 4, "u_1": 4, "w_de": 4, "kr_": 4, "rad": 4, "statistics_msg_": 4, "constructor": [5, 6], "initiali": 5, "get_vehicle_state_": 5, "get_vehicle_status_": 5, "get_vehicle_constants_": 5, "violat": 5, "ocur": 5, "true": [5, 6], "otherwis": [5, 9], "check_geofencing_viol": 5, "overview": 6, "how": [6, 7], "add": 6, "new": [6, 7], "behaviour": 6, "prototyp": 6, "For": 6, "instanc": 6, "want": 6, "might": 6, "sens": 6, "rather": 6, "than": 6, "structur": 6, "introduc": 6, "thei": 6, "step": [6, 12, 13, 16], "guid": 6, "abstract": [6, 7], "inherit": 6, "highlight": 6, "yellow": 6, "line": 6, "42": 6, "47": 6, "snippet": 6, "some": 6, "initialize_mod": 6, "exit": 6, "addition": 6, "access": [6, 16], "world": 6, "respect": 6, "quaterniond": 6, "angular_veloc": 6, "whether": [6, 9], "fly": [6, 16], "curv": 6, "kg": 6, "thrust_curve_id": 6, "none": 6, "thurst_curve_param": 6, "thrust_curve_valu": 6, "valu": [6, 7], "associ": 6, "mean": 6, "do": [6, 12], "manual": 6, "topic": 6, "care": 6, "requir": [6, 13, 14, 15], "so": 6, "share": 6, "member": 6, "directli": [6, 9], "don": 6, "hard": 6, "clean": 6, "autopilot_mod": 6, "simpl": 6, "exampl": [6, 16], "show": 6, "workspac": [6, 10, 13], "go": [6, 10, 12, 13], "directori": [6, 12], "cd": [6, 10, 12, 13], "pkg": 6, "build": [6, 10, 13], "type": [6, 16], "ament_cmak": 6, "custom_mod": 6, "xml": 6, "touch": 6, "custom_modes_plugin": 6, "name": [6, 9, 16], "mode_custom_waypoint": 6, "contain": [6, 10, 13], "pragma": 6, "core": 6, "customwaypointmod": 6, "overrid": 6, "controlposit": 6, "waypoint_subscriber_": 6, "waypoint_callback": 6, "store": 6, "latest": [6, 12, 16], "target_po": 6, "float": [6, 16], "target_yaw": 6, "0f": 6, "waypoint_set_": 6, "memori": [6, 16], "cannot": 6, "ani": [6, 7, 9, 16], "resourc": 6, "were": 6, "alloc": 6, "everi": 6, "iter": 6, "logic": 6, "server": 6, "declare_paramet": 6, "waypoint_top": 6, "create_subscript": 6, "get_paramet": 6, "as_str": 6, "systemdefaultsqo": 6, "bind": 6, "placehold": 6, "_1": 6, "log": 6, "been": 6, "correctli": 6, "rclcpp_info": 6, "get_logg": 6, "alreadi": 6, "rclcpp_error": 6, "twice": 6, "successfulli": 6, "anoth": [6, 16], "whatev": 6, "activ": [6, 16], "could": 6, "lower": [6, 16], "whenev": 6, "rclcpp_warn": 6, "f": 6, "class_list_macro": 6, "pluginlib_export_class": 6, "last": 6, "export": 6, "href": 6, "http": [6, 8, 12, 16], "download": [6, 12, 16], "org": [6, 16], "schema": 6, "package_format3": 6, "xsd": 6, "schematypen": 6, "www": 6, "w3": 6, "2001": 6, "xmlschema": 6, "format": 6, "descript": 6, "email": 6, "tecnico": [6, 8, 9], "ulisboa": [6, 8, 9], "pt": [6, 8, 9], "bsd": 6, "buildtool_depend": 6, "ament_cmake_ro": 6, "test_depend": 6, "ament_lint_auto": 6, "ament_lint_common": 6, "build_typ": 6, "cmakelist": 6, "txt": 6, "eigen3": 6, "algebra": 6, "cmake_minimum_requir": 6, "compil": [6, 10, 12, 13, 16], "give": 6, "warn": 6, "cmake_cxx_standard": 6, "cmake_cxx_standard_requir": 6, "ON": [6, 9], "cmake_compiler_is_gnucxx": 6, "OR": [6, 9], "cmake_cxx_compiler_id": 6, "match": 6, "clang": 6, "add_compile_opt": 6, "wall": 6, "wextra": 6, "wpedant": 6, "wno": 6, "unus": 6, "compar": 6, "o3": 6, "endif": 6, "find_packag": 6, "add_librari": 6, "project_nam": 6, "target_include_directori": 6, "build_interfac": 6, "cmake_current_source_dir": 6, "install_interfac": 6, "eigen3_include_dir": 6, "add_definit": 6, "eigen3_definit": 6, "ament_target_depend": 6, "inform": 6, "pluginlib_export_plugin_description_fil": 6, "export_": 6, "archiv": 6, "destin": 6, "lib": 6, "librari": 6, "bin": [6, 16], "caus": [6, 9], "macro": 6, "dllexport": 6, "dllimport": 6, "appropri": 6, "dll": 6, "consum": 6, "target_compile_definit": 6, "custom_modes_building_librari": 6, "build_test": 6, "skip": 6, "linter": 6, "copyright": [6, 9], "comment": 6, "ament_cmake_copyright_found": 6, "cpplint": 6, "git": [6, 10, 12, 13], "repo": 6, "ament_cmake_cpplint_found": 6, "ament_lint_auto_find_test_depend": 6, "ament_export_include_directori": 6, "ament_export_librari": 6, "ament_export_depend": 6, "ament_export_target": 6, "ament_packag": 6, "content": 6, "base_class_typ": 6, "yaml": 6, "list": [6, 9], "23": 6, "26": 6, "moreov": 6, "abl": [6, 12, 16], "countdown_to_disarm": 6, "rest": 6, "filter": 6, "set_mod": 6, "py": [6, 13], "import": 6, "launchdescript": 6, "launch_ro": 6, "action": 6, "declarelaunchargu": 6, "substitut": [6, 9], "launchconfigur": 6, "def": 6, "generate_launch_descript": 6, "config_fil": 6, "default_valu": 6, "autopilot_nod": 6, "explain": 7, "parametr": 7, "arbitrari": 7, "gamma": 7, "partial": 7, "dddot": 7, "statictrajectori": 7, "paramater": 7, "d_pd": 7, "d2_pd": 7, "d3_pd": 7, "d4_pd": 7, "d_yaw": 7, "vehicle_spe": 7, "vd": 7, "d_vd": 7, "d2_vd": 7, "getter": 7, "min_gamma": 7, "min_gamma_": 7, "max_gamma": 7, "max_gamma_": 7, "construct": 7, "cooper": 8, "aerial": 8, "marin": 8, "environment": 8, "master": [8, 16], "thesi": 8, "instituto": 8, "superior": 8, "\u00e9": 8, "cnico": 8, "octob": 8, "2021": 8, "url": 8, "fenix": 8, "curso": 8, "meec": 8, "dissertacao": 8, "1972678479054971": 8, "ant": 8, "\u00f3": 8, "nio": 8, "pascoal": 8, "chemic": 8, "spill": 8, "encircl": 8, "surfac": 8, "distribut": [8, 9], "approach": 8, "sensor": [8, 12, 14], "22": 8, "6": [8, 9], "2178": 8, "2022": 8, "daniel": 8, "vijai": 8, "kumar": 8, "2011": 8, "ieee": 8, "intern": 8, "confer": 8, "autom": 8, "volum": 8, "2520": 8, "2525": 8, "doi": 8, "1109": 8, "icra": 8, "5980409": 8, "jo": 8, "\u00e3": 8, "o": 8, "bruno": 8, "guerreiro": 8, "parcel": 8, "relai": 8, "manoeuvr": 8, "unman": 8, "aircraft": 8, "icua": 8, "137": 8, "145": 8, "non": [9, 15], "bsd4": 9, "lead": 9, "develop": [9, 15, 16], "nnnb4l": 9, "reserv": 9, "redistribut": 9, "binari": [9, 16], "form": 9, "modif": 9, "permit": 9, "condit": 9, "met": 9, "retain": 9, "notic": 9, "disclaim": 9, "reproduc": 9, "document": [9, 10, 13], "advertis": 9, "mention": 9, "displai": 9, "acknowledg": 9, "product": 9, "neither": 9, "holder": 9, "nor": 9, "contributor": 9, "endors": 9, "promot": 9, "prior": 9, "permiss": 9, "addit": 9, "restrict": 9, "shall": 9, "limit": 9, "profit": 9, "organ": 9, "strictli": 9, "prohibit": 9, "indirectli": 9, "weapon": 9, "simul": 9, "util": 9, "proper": 9, "BY": 9, "THE": 9, "AND": 9, "AS": 9, "impli": 9, "BUT": 9, "TO": 9, "OF": 9, "merchant": 9, "fit": 9, "FOR": 9, "IN": 9, "NO": 9, "event": 9, "BE": 9, "liabl": 9, "indirect": 9, "incident": 9, "special": 9, "exemplari": 9, "consequenti": 9, "damag": 9, "procur": 9, "good": 9, "loss": 9, "busi": 9, "interrupt": 9, "theori": 9, "liabil": 9, "contract": 9, "strict": 9, "tort": 9, "neglig": 9, "aris": 9, "wai": [9, 12], "even": 9, "IF": 9, "advis": 9, "SUCH": 9, "humbl": 10, "instruct": [10, 13], "after": [10, 13], "proce": 10, "separ": 10, "mkdir": 10, "pegasus_extern": 10, "casadi": 10, "ipopt": 10, "sudo": [10, 12, 16], "apt": [10, 12], "coinor": 10, "libipopt": 10, "dev": 10, "clone": [10, 12, 13], "repositori": [10, 13, 15], "ssh": [10, 12], "github": [10, 12, 13, 16], "com": [10, 12, 13, 16], "pegasusresearch": [10, 13], "colcon": [10, 13], "symlink": [10, 13], "bashrc": 10, "echo": 10, "bash": [10, 13], "recurs": [10, 12], "clasic": 10, "isaac": [10, 13], "sim": 10, "linux": [12, 16], "cmake": 12, "python3": 12, "pip": 12, "kconfiglib": 12, "jinja2": 12, "empi": 12, "jsonschema": 12, "pyro": 12, "genmsg": 12, "toml": 12, "numpi": 12, "futur": 12, "option": 12, "With": 12, "account": 12, "kei": 12, "14": 12, "sitl": 12, "releas": [12, 16], "submodul": 12, "safest": 12, "init": 12, "px4_sitl_default": 12, "nvidia": [13, 15], "rtx": 13, "graphic": 13, "card": [13, 16], "folder": 13, "pegasus_w": 13, "both": [13, 16], "environ": 13, "pegasus_isaac": 13, "replic": [14, 15], "compon": [14, 15], "1x": [14, 15], "cinewhoop": 14, "vtx": 14, "esp": [14, 16], "07": 14, "antenna": 14, "lipo": 14, "tattu": 14, "batteri": [14, 15], "1300mah": 14, "frsky": [14, 15], "xm": [14, 15], "plu": [14, 15], "accst": [14, 15], "16ch": [14, 15], "sbu": [14, 15], "flight": [14, 16], "optic": 14, "flow": [14, 16], "lastest": 15, "found": 15, "creativ": 15, "common": [15, 16], "jetson": 15, "orin": 15, "nano": 15, "kit": 15, "256gb": 15, "nvme": 15, "ssd": 15, "pcie": 15, "kakut": 15, "h7": 15, "microcontrol": 15, "4in1": 15, "esc": 15, "4x": 15, "v2306": 15, "v2": 15, "2400kv": 15, "micro": 15, "m8n": 15, "gp": 15, "d435i": 15, "propel": 15, "dalprop": 15, "cyclon": 15, "t5050": 15, "4300mah": 15, "jumper": 15, "dupont": 15, "wire": 15, "xt60": 15, "cabl": [15, 16], "connector": 15, "flash": 16, "pixhawk": 16, "wifi": 16, "connect": 16, "esp8266": 16, "mavesp8266": 16, "firmwar": 16, "tridg": 16, "ardupilot": 16, "01_1m": 16, "board": 16, "1mb": 16, "typic": 16, "01": 16, "512kb": 16, "12e": 16, "4mb": 16, "ftdi": 16, "upload": 16, "devic": 16, "solder": 16, "6pin": 16, "narrow": 16, "tx": 16, "rx": 16, "vcc": 16, "gnd": 16, "pin": 16, "put": 16, "bootload": 16, "gpio0": 16, "button": 16, "red": 16, "remain": 16, "dimli": 16, "lit": 16, "pc": 16, "nodemcu": 16, "flasher": 16, "blob": 16, "win64": 16, "esp8266flash": 16, "ex": 16, "mac": 16, "esptool": 16, "espressif": 16, "advanc": 16, "ensur": 16, "size": 16, "4mbyte": 16, "1mbyte": 16, "push": 16, "gear": 16, "port": 16, "success": 16, "blue": 16, "bar": 16, "slowli": 16, "stretch": 16, "icon": 16, "bottom": 16, "img": 16, "imag": 16, "telemetri": 16, "jpg": 16, "alt": 16, "esp86266": 16, "style": 16, "margin": 16, "10px": 16, "programm": 16, "attach": 16, "serial1": 16, "telem1": 16, "number": 16, "serial1_protocol": 16, "mavlink2": 16, "mavlink1": 16, "serial1_baud": 16, "921": 16, "921600": 16, "baud": 16, "problem": 16, "help": 16, "brd_ser1_rtsct": 16, "disabl": 16, "although": 16, "qgroundcontrol": 16, "ssid": 16, "password": 16, "udp": 16, "id": 16, "browser": 16, "192": 16, "168": 16, "link": 16, "ap": 16, "reboot": 16, "web": 16, "png": 16, "adpat": 16, "copter": 16, "doc": 16, "html": 16, "rai": 16, "blog": 16, "2016": 16, "21": 16, "224": 16, "wi": 16, "fi": 16, "client": 16, "specifi": 16, "receiv": 16, "useful": 16, "nearbi": 16, "while": 16, "mainta": 16, "act": 16, "afterward": 16, "internet": 16, "outsid": 16, "ip": 16, "tcpdump": 16, "n": 16}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"pegasu": [0, 9, 10, 13, 15], "document": 0, "overview": 0, "develop": 0, "team": 0, "project": 0, "sponsor": 0, "get": 0, "start": 0, "featur": 0, "simul": [0, 10, 13], "vehicl": 0, "flight": [0, 1, 10, 15], "arena": [0, 1], "refer": [0, 4, 11], "indic": 0, "tabl": 0, "taguspark": 1, "set": 1, "up": 1, "optitrack": 1, "motiv": 1, "termin": 2, "consol": 2, "autopilot": [3, 12], "0": [3, 4, 5, 6, 7, 15], "oper": 3, "mode": [3, 6], "1": [3, 4, 6, 7], "interfac": [3, 4, 5, 6, 7], "2": [3, 4, 6, 7], "explan": 3, "3": [3, 7, 14], "configur": [3, 15], "file": 3, "control": 4, "definit": [4, 5, 7], "pid": 4, "mathemat": [4, 7], "background": [4, 7], "frame": [4, 11], "integr": 4, "action": 4, "melling": 4, "feed": 4, "forward": 4, "geofenc": 5, "provid": [6, 7], "state": 6, "machin": 6, "ad": [6, 7], "custom": [6, 7], "trajectori": 7, "manag": 7, "static": 7, "bibliographi": 8, "licens": 9, "instal": [10, 12], "extern": 10, "depend": 10, "run": 10, "real": 10, "gazebo": 12, "classic": 12, "px4": [12, 15], "kopi": 14, "bill": [14, 15], "materi": [14, 15], "drone": [14, 15, 16], "setup": [14, 15], "v1": 15, "cad": 15, "model": 15, "indoor": 15, "realsens": 15, "snapdragon": 16}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinxcontrib.bibtex": 9, "sphinx.ext.todo": 2, "sphinx": 57}, "alltitles": {"Pegasus Documentation": [[0, "pegasus-documentation"]], "Overview": [[0, "overview"]], "Developer Team": [[0, "developer-team"]], "Project Sponsors": [[0, "project-sponsors"]], "Getting Started": [[0, null]], "Features": [[0, null]], "Simulation": [[0, null]], "Vehicles": [[0, null]], "Flight Arena": [[0, null]], "References": [[0, null]], "Indices and tables": [[0, "indices-and-tables"]], "Taguspark Flight Arena": [[1, "taguspark-flight-arena"]], "Setting up Optitrack with Motive": [[1, "setting-up-optitrack-with-motive"]], "": [[1, null], [1, null]], "Terminal console": [[2, "terminal-console"]], "Autopilot": [[3, "autopilot"]], "0. Operating Modes": [[3, "operating-modes"]], "1. Autopilot Interface": [[3, "autopilot-interface"]], "2. Explanation": [[3, "explanation"]], "3. Autopilot Configuration File": [[3, "autopilot-configuration-file"]], "Controllers": [[4, "controllers"]], "0. Definition of the Controller Interface": [[4, "definition-of-the-controller-interface"]], "1. PID Controller - Mathematical Background": [[4, "pid-controller-mathematical-background"]], "Reference Frames": [[4, null], [4, null], [11, "reference-frames"]], "Integral Action": [[4, null]], "2. Mellinger Controller - Mathematical Background": [[4, "mellinger-controller-mathematical-background"]], "Feed-forward references": [[4, null]], "Geofencing": [[5, "geofencing"]], "0. Definition of the Geofencing Interface": [[5, "definition-of-the-geofencing-interface"]], "Modes": [[6, "modes"]], "0. Mode Interface": [[6, "mode-interface"]], "1. Provided State Machine Modes": [[6, "provided-state-machine-modes"]], "2. Adding Custom Modes to the State Machine": [[6, "adding-custom-modes-to-the-state-machine"]], "Trajectory Manager": [[7, "trajectory-manager"]], "0. Mathematical Background": [[7, "mathematical-background"]], "1. Definition of the Trajectory Interface": [[7, "definition-of-the-trajectory-interface"]], "2. Provided Trajectories": [[7, "provided-trajectories"]], "3. Adding Custom Static Trajectories": [[7, "adding-custom-static-trajectories"]], "Bibliography": [[8, "bibliography"]], "License": [[9, "license"]], "Pegasus License": [[9, "pegasus-license"]], "Installation": [[10, "installation"]], "Installing External Dependencies": [[10, "installing-external-dependencies"]], "Installing Pegasus": [[10, "installing-pegasus"]], "Running Simulations with Pegasus": [[10, "running-simulations-with-pegasus"]], "Running Real Flight with Pegasus": [[10, "running-real-flight-with-pegasus"]], "Gazebo Classic": [[12, "gazebo-classic"]], "Installing Gazebo Classic": [[12, "installing-gazebo-classic"]], "Installing PX4-Autopilot": [[12, "installing-px4-autopilot"]], "Pegasus Simulator": [[13, "pegasus-simulator"]], "Kopis 3\u201d": [[14, "kopis-3"]], "Bill of Materials": [[14, "bill-of-materials"], [15, "bill-of-materials"]], "Kopis Drone Setup": [[14, "kopis-drone-setup"]], "Pegasus Drone v1.0.0": [[15, "pegasus-drone-v1-0-0"]], "CAD Model": [[15, "cad-model"]], "PX4 Configuration for Indoor Flight": [[15, "px4-configuration-for-indoor-flight"]], "Pegasus Drone Setup": [[15, "pegasus-drone-setup"]], "Realsense Setup": [[15, "realsense-setup"]], "Snapdragon Drone": [[16, "snapdragon-drone"]]}, "indexentries": {}})